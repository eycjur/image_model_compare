<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="DALLE-2ã€DALLE-3ã€Geminiãªã©ã®ç”»åƒç”ŸæˆAIã®çµæœã‚’æ¯”è¼ƒã§ãã‚‹ãƒ„ãƒ¼ãƒ«">
    <title>ç”»åƒç”ŸæˆAIæ¯”è¼ƒã‚µã‚¤ãƒˆ - AI Image Generator Comparison</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {}
            }
        }
    </script>
    <style>
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-500 to-purple-600 font-sans text-gray-800">
    <div id="app" class="max-w-6xl mx-auto p-5">
        <!-- Header -->
        <header class="text-center bg-white/95 rounded-2xl p-8 mb-8 shadow-xl">
            <h1 class="text-4xl font-bold mb-3 bg-gradient-to-r from-indigo-500 to-purple-600 bg-clip-text text-transparent">
                ç”»åƒç”ŸæˆAIæ¯”è¼ƒã‚µã‚¤ãƒˆ
            </h1>
            <p class="text-lg text-gray-600">DALLE-2, DALLE-3, Geminiã®ç”»åƒç”Ÿæˆçµæœã‚’æ¯”è¼ƒã§ãã¾ã™</p>
        </header>

        <main>
            <!-- Input Section -->
            <section class="bg-white/95 rounded-2xl p-8 mb-8 shadow-xl" aria-label="å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³">
                <!-- Mode Toggle -->
                <fieldset class="mb-6">
                    <legend class="sr-only">å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰é¸æŠ</legend>
                    <div class="flex gap-4 mb-4" role="radiogroup" aria-label="å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰">
                        <label class="inline-flex items-center cursor-pointer">
                            <input
                                type="radio"
                                name="inputMode"
                                value="text"
                                v-model="inputMode"
                                class="form-radio text-indigo-600 focus:ring-2 focus:ring-indigo-500"
                                aria-label="ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ãƒ¢ãƒ¼ãƒ‰"
                            >
                            <span class="ml-2 text-gray-700 font-medium">ãƒ†ã‚­ã‚¹ãƒˆã®ã¿</span>
                        </label>
                        <label class="inline-flex items-center cursor-pointer">
                            <input
                                type="radio"
                                name="inputMode"
                                value="image"
                                v-model="inputMode"
                                class="form-radio text-indigo-600 focus:ring-2 focus:ring-indigo-500"
                                aria-label="ç”»åƒã¨ãƒ†ã‚­ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰"
                            >
                            <span class="ml-2 text-gray-700 font-medium">ç”»åƒ + ãƒ†ã‚­ã‚¹ãƒˆ</span>
                        </label>
                    </div>
                </fieldset>

                <!-- Image Upload Section -->
                <div v-show="isImageMode" class="mb-6" role="region" aria-label="ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰">
                    <label for="imageUpload" class="block font-semibold mb-3 text-gray-700">
                        å‚è€ƒç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼š
                    </label>
                    <div class="border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-indigo-400 transition-colors cursor-pointer">
                        <input
                            type="file"
                            ref="fileInput"
                            accept="image/*"
                            @change="handleFileUpload"
                            class="hidden"
                            aria-label="ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ"
                        >

                        <!-- Upload content -->
                        <div v-if="!uploadedImage && !showCamera">
                            <svg class="mx-auto h-12 w-12 text-gray-400 mb-3" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
                                <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <div class="flex flex-col sm:flex-row gap-3 justify-center items-center">
                                <button
                                    @click="$refs.fileInput.click()"
                                    class="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg font-medium hover:bg-indigo-200 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                >
                                    ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ
                                </button>
                                <span class="text-gray-400 text-sm">ã¾ãŸã¯</span>
                                <button
                                    @click="startCamera"
                                    class="px-4 py-2 bg-green-100 text-green-700 rounded-lg font-medium hover:bg-green-200 transition-colors focus:outline-none focus:ring-2 focus:ring-green-500"
                                >
                                    ğŸ“· ã‚«ãƒ¡ãƒ©ã§æ’®å½±
                                </button>
                            </div>
                            <p class="text-sm text-gray-400 mt-2">PNG, JPG, GIFå¯¾å¿œ</p>
                        </div>

                        <!-- Camera View -->
                        <div v-if="showCamera && !uploadedImage" class="text-center">
                            <!-- Camera Selection -->
                            <div v-if="availableCameras.length > 0" class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    ã‚«ãƒ¡ãƒ©ã‚’é¸æŠ ({{ availableCameras.length }}å°æ¤œå‡º):
                                </label>
                                <select
                                    v-model="selectedCameraId"
                                    @change="switchCamera(selectedCameraId)"
                                    class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 max-w-md"
                                >
                                    <option v-for="camera in availableCameras" :key="camera.id" :value="camera.id">
                                        {{ camera.isIPhone ? 'ğŸ“± ' : 'ğŸ“· ' }}{{ camera.label }}
                                        {{ camera.isIPhone ? ' (iPhoneé€£æº)' : '' }}
                                    </option>
                                </select>
                            </div>

                            <!-- No camera detected -->
                            <div v-if="availableCameras.length === 0" class="mb-4 p-3 bg-yellow-50 rounded-lg">
                                <p class="text-sm text-yellow-700">
                                    ã‚«ãƒ¡ãƒ©ãŒæ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
                                </p>
                            </div>

                            <video
                                ref="video"
                                class="mx-auto max-w-full max-h-64 rounded-lg shadow-md mb-4"
                                autoplay
                                playsinline
                            ></video>

                            <!-- Camera Controls -->
                            <div class="flex gap-3 justify-center">
                                <button
                                    @click="capturePhoto"
                                    class="px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500"
                                >
                                    ğŸ“¸ æ’®å½±
                                </button>
                                <button
                                    @click="stopCamera"
                                    class="px-4 py-2 bg-gray-500 text-white rounded-lg font-medium hover:bg-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500"
                                >
                                    âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                                </button>
                            </div>

                            <!-- iPhone Camera Tip -->
                            <div v-if="availableCameras.some(camera => camera.isIPhone)" class="mt-3 p-3 bg-blue-50 rounded-lg">
                                <p class="text-sm text-blue-700">
                                    ğŸ“± iPhoneé€£æºã‚«ãƒ¡ãƒ©ãŒåˆ©ç”¨å¯èƒ½ã§ã™ï¼<br>
                                    é«˜å“è³ªãªå†™çœŸæ’®å½±ãŒå¯èƒ½ã§ã™ã€‚
                                </p>
                            </div>
                        </div>

                        <!-- Hidden canvas for photo capture -->
                        <canvas ref="canvas" class="hidden"></canvas>

                        <!-- Image preview -->
                        <div v-if="uploadedImage" class="mt-4">
                            <img :src="uploadedImage" class="mx-auto max-h-32 rounded-lg shadow-md" alt="ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸç”»åƒã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
                            <button
                                @click="removeUploadedImage"
                                class="mt-2 text-sm text-red-600 hover:text-red-800 focus:outline-none focus:ring-2 focus:ring-red-500 rounded px-2 py-1"
                                aria-label="ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»åƒã‚’å‰Šé™¤"
                            >
                                ç”»åƒã‚’å‰Šé™¤
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Text Prompt -->
                <div class="mb-6">
                    <label for="textPrompt" class="block font-semibold mb-3 text-gray-700">
                        <span>{{ promptLabel }}</span>
                    </label>
                    <textarea
                        v-model="textPrompt"
                        placeholder="ä¾‹ï¼šç¾ã—ã„å¤•æ—¥ã®æµ·è¾ºã®é¢¨æ™¯ã€ãƒªã‚¢ãƒ«ãªå†™çœŸã‚¹ã‚¿ã‚¤ãƒ«"
                        rows="3"
                        class="w-full p-4 border-2 border-gray-200 rounded-xl text-base resize-y transition-colors focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        aria-required="true"
                        aria-label="ç”»åƒç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ"
                    ></textarea>
                </div>

                <!-- API Keys -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-6" role="group" aria-label="APIã‚­ãƒ¼å…¥åŠ›">
                    <div>
                        <label for="openaiKey" class="block font-semibold mb-2 text-gray-700">
                            OpenAI API Key:
                        </label>
                        <input
                            v-model="apiKeys.openai"
                            type="password"
                            placeholder="sk-..."
                            class="w-full p-3 border-2 border-gray-200 rounded-lg transition-colors focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                            aria-required="true"
                            aria-label="OpenAI APIã‚­ãƒ¼"
                            autocomplete="off"
                        >
                    </div>
                    <div>
                        <label for="geminiKey" class="block font-semibold mb-2 text-gray-700">
                            Gemini API Key:
                        </label>
                        <input
                            v-model="apiKeys.gemini"
                            type="password"
                            placeholder="AIza..."
                            class="w-full p-3 border-2 border-gray-200 rounded-lg transition-colors focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                            aria-required="true"
                            aria-label="Gemini APIã‚­ãƒ¼"
                            autocomplete="off"
                        >
                    </div>
                </div>

                <!-- Save Keys Option -->
                <div class="mb-4">
                    <label class="inline-flex items-center text-sm">
                        <input v-model="saveKeys" type="checkbox" class="form-checkbox text-indigo-600">
                        <span class="ml-2 text-gray-600">APIã‚­ãƒ¼ã‚’å®‰å…¨ã«ä¿å­˜ï¼ˆæ°¸ç¶šçš„ï¼‰</span>
                    </label>
                </div>

                <!-- Clear Saved Keys -->
                <div v-if="hasSavedKeys()" class="mb-4 text-center">
                    <button
                        @click="clearSavedKeys"
                        class="px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500"
                    >
                        ä¿å­˜ã•ã‚ŒãŸAPIã‚­ãƒ¼ã‚’å‰Šé™¤
                    </button>
                </div>

                <!-- Generate Button -->
                <button
                    @click="generateImages"
                    :disabled="!canGenerate"
                    class="w-full p-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl text-lg transition-all hover:-translate-y-1 hover:shadow-lg disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none focus:outline-none focus:ring-4 focus:ring-indigo-300"
                    aria-label="ç”»åƒã‚’ç”Ÿæˆã—ã¦æ¯”è¼ƒ"
                >
                    ç”»åƒã‚’ç”Ÿæˆã—ã¦æ¯”è¼ƒ
                </button>
            </section>

            <!-- Loading Indicator -->
            <section
                v-show="isGenerating"
                class="text-center p-10 bg-white/95 rounded-2xl mb-8 shadow-xl"
                role="status"
                aria-live="polite"
                aria-label="èª­ã¿è¾¼ã¿ä¸­"
            >
                <div class="w-12 h-12 border-4 border-gray-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-5" aria-hidden="true"></div>
                <p class="text-lg">ç”»åƒã‚’ç”Ÿæˆä¸­...</p>
            </section>

            <!-- Results Section -->
            <section
                class="grid grid-cols-1 lg:grid-cols-3 gap-6"
                role="region"
                aria-label="ç”Ÿæˆçµæœ"
            >
                <!-- DALLE-2 Card -->
                <article class="bg-white/95 rounded-2xl p-6 shadow-xl transition-all hover:-translate-y-2 hover:shadow-2xl">
                    <h2 class="text-center text-xl font-semibold mb-5 text-gray-700">{{ models.dalle2.name }}</h2>
                    <div class="min-h-[300px] rounded-xl overflow-hidden bg-gray-50 flex items-center justify-center mb-4">
                        <img
                            v-if="models.dalle2.image"
                            :src="models.dalle2.image"
                            alt="DALLE-2ã§ç”Ÿæˆã•ã‚ŒãŸç”»åƒ"
                            class="max-w-full max-h-96 object-contain rounded-xl"
                            loading="lazy"
                        >
                        <div v-else class="text-gray-400 italic text-center" aria-live="polite">
                            <span v-if="models.dalle2.status === 'error'" class="text-red-500">
                                ç”Ÿæˆã‚¨ãƒ©ãƒ¼
                            </span>
                            <span v-else>
                                ç”»åƒãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
                            </span>
                        </div>
                    </div>
                    <div class="flex justify-between items-center text-sm">
                        <span
                            :class="'px-3 py-1 rounded-full text-xs font-medium ' + getStatusConfig(models.dalle2.status).class"
                            role="status"
                            aria-live="polite"
                        >
                            {{ getStatusConfig(models.dalle2.status).text }}
                        </span>
                        <span v-if="models.dalle2.time" class="text-gray-500" aria-label="ç”Ÿæˆæ™‚é–“">{{ models.dalle2.time }}ç§’</span>
                    </div>
                </article>

                <!-- DALLE-3 Card -->
                <article v-show="showDalle3" class="bg-white/95 rounded-2xl p-6 shadow-xl transition-all hover:-translate-y-2 hover:shadow-2xl">
                    <h2 class="text-center text-xl font-semibold mb-5 text-gray-700">{{ models.dalle3.name }}</h2>
                    <div class="min-h-[300px] rounded-xl overflow-hidden bg-gray-50 flex items-center justify-center mb-4">
                        <img
                            v-if="models.dalle3.image"
                            :src="models.dalle3.image"
                            alt="DALLE-3ã§ç”Ÿæˆã•ã‚ŒãŸç”»åƒ"
                            class="max-w-full max-h-96 object-contain rounded-xl"
                            loading="lazy"
                        >
                        <div v-else class="text-gray-400 italic text-center" aria-live="polite">
                            <span v-if="models.dalle3.status === 'error'" class="text-red-500">
                                ç”Ÿæˆã‚¨ãƒ©ãƒ¼
                            </span>
                            <span v-else>
                                ç”»åƒãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
                            </span>
                        </div>
                    </div>
                    <div class="flex justify-between items-center text-sm">
                        <span
                            :class="'px-3 py-1 rounded-full text-xs font-medium ' + getStatusConfig(models.dalle3.status).class"
                            role="status"
                            aria-live="polite"
                        >
                            {{ getStatusConfig(models.dalle3.status).text }}
                        </span>
                        <span v-if="models.dalle3.time" class="text-gray-500" aria-label="ç”Ÿæˆæ™‚é–“">{{ models.dalle3.time }}ç§’</span>
                    </div>
                </article>

                <!-- Gemini Card -->
                <article class="bg-white/95 rounded-2xl p-6 shadow-xl transition-all hover:-translate-y-2 hover:shadow-2xl">
                    <h2 class="text-center text-xl font-semibold mb-5 text-gray-700">{{ models.gemini.name }}</h2>
                    <div class="min-h-[300px] rounded-xl overflow-hidden bg-gray-50 flex items-center justify-center mb-4">
                        <img
                            v-if="models.gemini.image"
                            :src="models.gemini.image"
                            alt="Geminiã§ç”Ÿæˆã•ã‚ŒãŸç”»åƒ"
                            class="max-w-full max-h-96 object-contain rounded-xl"
                            loading="lazy"
                        >
                        <div v-else class="text-gray-400 italic text-center" aria-live="polite">
                            <span v-if="models.gemini.status === 'error'" class="text-red-500">
                                ç”Ÿæˆã‚¨ãƒ©ãƒ¼
                            </span>
                            <span v-else>
                                ç”»åƒãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
                            </span>
                        </div>
                    </div>
                    <div class="flex justify-between items-center text-sm">
                        <span
                            :class="'px-3 py-1 rounded-full text-xs font-medium ' + getStatusConfig(models.gemini.status).class"
                            role="status"
                            aria-live="polite"
                        >
                            {{ getStatusConfig(models.gemini.status).text }}
                        </span>
                        <span v-if="models.gemini.time" class="text-gray-500" aria-label="ç”Ÿæˆæ™‚é–“">{{ models.gemini.time }}ç§’</span>
                    </div>
                </article>
            </section>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>